require_relative 'helpers/init.rb'

#ConfigEnv.path_to_config("#{Dir.getwd}/config/config_env.rb")

db = ConnectToDB.call

list_of_repo = CreateRepoList.call

source CallGithubApi, list_of_repo

destination SaveRecordToDB, db, 'repos_raw_responses'

post_process do
  results = CountProcessedRecords.call(db, 'repos_raw_responses')
  puts "Total processed records: #{results}."
end
